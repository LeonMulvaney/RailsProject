<div class="container">
      <p id="notice"><%= notice %></p>

  <h1>Appointments</h1>
  <hr>
  <div class ="row">
    <div class ="col-md-4">
      <%= search_form_for @q do |f| %> <!--Search form_for (Ransack Requirement) -->
      <%= f.label "Search Appointments" %>
      <!-- Search the db using ransack (If any search field contains), parameters From: https://github.com/activerecord-hackery/ransack --> 
      <%= f.search_field :time_or_patient_or_visited_cont, class: 'form-control input-sm'%>
      <br>

      <%= f.label "Date From:" %>
      <%= f.date_field :date_gteq, class: 'form-control input-sm '%> <!--Starting date must be greater than or equal to value input and less than or equal, this uses the ransack gem parameters -->

      <%= f.label "Date To:" %>
      <%= f.date_field :date_lteq, class: 'form-control input-sm '%>
      <br>
      <%= f.submit class: 'btn btn-success fill-div' %>
      <% end %> <!--End of search by date form -->   
      <br>
      <%= link_to "Reset Filter",   appointments_path, class: 'btn btn-default fill-div' %>
    </div>
  </div>
  <hr>
  <div class=row>
    <div class="col-md-12">
          <table class = "table table-striped table-hover">
            <thead>
              <tr>
              <th class ="h5"><%= sort_link(@q, :date) %></th>
              <th class ="h5"><%= sort_link(@q, :time) %></th>
              <th class ="h5"><%= sort_link(@q, :patient) %></th>
              <th class ="h5"><%= sort_link(@q, :visited) %></th>
                <th colspan="3"></th>
              </tr>
            </thead>

            <tbody>
              <% @appointments.each do |appointment| %>
                <tr>
                  <td><%= appointment.date%></td>
                  <td><%= appointment.time %></td>
                  <td><%= appointment.patient %></td>
                  <td><%= appointment.visited %></td>
                  <td><%= link_to 'Show', appointment %></td>
                  <td><%= link_to 'Edit', edit_appointment_path(appointment) %></td>
                  <td><%= link_to 'Destroy', appointment, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <br>
        <%= will_paginate @patients %>
        <br>
        <%= link_to 'New Appointment', new_appointment_path %>
        <br>
        <!-- Download Link to PDF - Call to pdf format -->

        <%= link_to "Appointments Report", appointments_path(@appointments, :format => 'pdf'), target: "_blank" %>
      </div>
    </div>
</div>
